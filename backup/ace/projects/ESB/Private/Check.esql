BROKER SCHEMA Private


CREATE DATABASE MODULE CheckExceptionList

	CREATE FUNCTION Main() RETURNS BOOLEAN

	BEGIN

		IF EXISTS ( ExceptionList.*[] ) THEN
			SET Environment.ESB.ExceptionList = ExceptionList;
		END IF;
		
		RETURN TRUE;

	END;

END MODULE;


CREATE COMPUTE MODULE CheckCatch

	DECLARE Check EXTERNAL CHAR 'Catch';

	CREATE FUNCTION Main() RETURNS BOOLEAN
	
	BEGIN
 
		SET Environment.ESB.Directory = ESB.ErrorDir() || Check || '/' || MessageFlowLabel;
		SET Environment.ESB.File      = ESB.FileName() || '.xml';
		
        SET OutputRoot.Properties.CodedCharSetId = 1208;
        SET OutputRoot.Properties.Encoding 		 = 546;

		SET OutputRoot.XMLNSC.Check.CurrentExceptionList  = InputExceptionList;
		SET OutputRoot.XMLNSC.Check.PreviousExceptionList = Environment.ESB.ExceptionList;

		RETURN TRUE;

	END;

END MODULE;