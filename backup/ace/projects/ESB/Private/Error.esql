BROKER SCHEMA Private


CREATE COMPUTE MODULE Error

	CREATE FUNCTION Main() RETURNS BOOLEAN

	BEGIN

		SET Environment.ESB.MsgId = COALESCE(Environment.ESB.MsgId, UUIDASCHAR);
		
		SET OutputRoot.XMLNSC.Error.Text = 'An error occured, Error ID is: ' || Environment.ESB.MsgId;

		IF Environment.ESB.MessageType = 'request' THEN
			PROPAGATE TO LABEL 'Reply-' || Environment.ESB.TransportType;
		ELSE
			PROPAGATE TO LABEL 'Abort';
		END IF;
		
		RETURN FALSE;

	END;

END MODULE;